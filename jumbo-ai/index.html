<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Jumbo</title>
  <meta property="og:title" content="Jumbo AI">
  <meta property="og:description" content="Chat with Jumbo, your personal AI assistant, and explore powerful AI tools all in one place!">
  <meta property="og:image" content="https://cdn.discordapp.com/icons/1356306255181906070/93b4f441c82cec8e29c6edc61ea51ae0.png">
  <meta property="og:url" content="https://jumbo-v1.web.app">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Jumbo">
  <meta name="theme-color" content="#06FAFA">
<meta name="color-scheme" content="light dark" />
<link rel="preload" href="loadingGifs/chroma.gif" as="image" type="image/gif">
<link rel="preload" href="loadingGifs/tiles.gif" as="image" type="image/gif">
<link rel="preload" href="loadingGifs/draw.gif" as="image" type="image/gif">
<script>(function(){try{const g=['loadingGifs/chroma.gif','loadingGifs/tiles.gif','loadingGifs/draw.gif'];for(const u of g){const i=new Image();i.src=u;}}catch(e){}})();</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7B7CFH346F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-7B7CFH346F');
</script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<style>
:root {
  --bg: #0e0f12;
  --panel: #13151a;
  --elev: #171923;
  --text: #e7e9ee;
  --sub: #aeb3c2;
  --accent: #00c3ff;
  --accent-weak: #2a2f3a;
  --border: #2a2f3a;
  --user: #2b6cb0;
  --bot: #10a37f;
  --danger: #ef4444;
  --muted: #8b91a3;
  --bubble: #1a1f2a;
  --bubble-user: #192338;
  --code: #0b0d12;
  --kbd: #222735;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
}
body.light {
  --bg: #f9f9f9;
  --panel: #ffffff;
  --elev: #f4f4f4;
  --text: #1a1a1a;
  --sub: #555555;
  --accent: #10a37f;
  --accent-weak: #38b29c;
  --border: #dcdcdc;
  --user: #2b6cb0;
  --bot: #10a37f;
  --danger: #e74c3c;
  --muted: #888888;
  --bubble: #ffffff;
  --bubble-user: #e6f0ff;
  --code: #f5f5f5;
  --kbd: #e8e8e8;
  --shadow: 0 4px 12px rgba(0,0,0,0.08);
}
* {
  box-sizing: border-box;
}
html, body {
  height: 100%;
}
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  display: grid;
  grid-template-columns: 260px 1fr;
  grid-template-rows: auto 1fr auto;
  grid-template-areas:
    "sidebar header"
    "sidebar main"
    "sidebar input";
}
header {
  grid-area: header;
  position: sticky;
  top: 0;
  z-index: 5;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  padding: 10px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  justify-content: space-between;
}
header .brand {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 700;
  letter-spacing: .2px;
}
.logo {
  width: 28px;
  height: 28px;
  display: grid;
  place-items: center;
  border-radius: 8px;
  background: var(--bot);
  color: #fff;
  box-shadow: none;
  font-weight: 900;
}
header .actions {
  display: flex;
  gap: 8px;
}
.btn {
  appearance: none;
  border: 1px solid var(--border);
  background: var(--panel);
  color: var(--text);
  border-radius: 10px;
  padding: 8px 12px;
  cursor: pointer;
  transition: .15s ease;
  font-weight: 600;
}
.btn:hover {
  filter: brightness(0.95);
  transform: translateY(-1px);
}
.btn.primary {
  border-color: #252933;
  border-width: 2px;
  position: relative;
  z-index: 1;
  overflow: visible;
  transform: translateZ(0);
  transition: transform .12s ease, box-shadow .18s ease;
  box-shadow: 0 6px 18px rgba(16,163,127,0.06);
}
.btn.primary::after {
  display: none;
}
.btn.primary:active { transform: translateY(-1px) scale(0.997); }
.btn.primary:focus-visible {
  outline: none;
  box-shadow: 0 0 0 6px rgba(16,163,127,0.18), 0 10px 30px rgba(0,0,0,0.12);
}
#aiBuilderToggle.primary {
  border-color: #0b5ed7;
  box-shadow: 0 6px 18px rgba(11,94,215,0.08);
}
#aiBuilderToggle.primary:focus-visible {
  box-shadow: 0 0 0 6px rgba(11,94,215,0.18), 0 10px 30px rgba(0,0,0,0.12);
}
@media (prefers-reduced-motion: reduce) {
  .btn.primary::after { animation: none !important; filter: blur(6px) !important; box-shadow: none !important; }
  .btn.primary { box-shadow: 0 4px 10px rgba(16,163,127,0.06); }
}
.btn.ghost {
  background: transparent;
}
.btn.danger {
  border-color: #e74c3c;
  background: #fceaea;
  color: #a82c2c;
}
body:not(.light) .btn.danger {
  background: #350000;
  color: #fff;
  border-color: var(--danger);
}
.btn.icon {
  padding: 8px;
  width: 38px;
  display: grid;
  place-items: center;
}
#mobileToolsBtnComposer {
  width: 38px;
  height: 38px;
  padding: 0;
  display: grid;
  place-items: center;
  align-self: center;
  border-radius: 10px;
}
#jsFixToggle.primary,
#imageToggle.primary,
#thinkToggle.primary,
#webSearch.primary {
  border-color: var(--accent);
  box-shadow: 0 6px 18px rgba(16,163,127,0.08);
}
.btn:disabled {
  opacity: .6;
  cursor: not-allowed;
  transform: none;
}
aside {
  grid-area: sidebar;
  border-right: 1px solid var(--border);
  background: var(--panel);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
.side-top {
  padding: 12px;
}
.side-scroll {
  overflow: auto;
  flex: 1;
  padding: 0 8px 12px 12px;
}
.conv {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 10px;
  margin: 8px 0;
  background: var(--elev);
  border: 1px solid var(--border);
  border-radius: 12px;
  cursor: pointer;
  transition: .15s ease;
  box-shadow: inset 0 2px 6px rgba(0,0,0,.08);
}
.conv:hover {
  border-color: #c0c0c0;
}
.conv .title {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.conv.active {
  outline: 2px solid var(--accent-weak);
}
.side-bottom {
  padding: 12px;
  border-top: 1px solid var(--border);
  display: grid;
  gap: 8px;
}
.small {
  font-size: .875rem;
  color: var(--muted);
}
main {
  grid-area: main;
  overflow: auto;
  padding: 24px;
  scroll-behavior: smooth;
}
.msg {
  display: grid;
  grid-template-columns: 42px 1fr;
  gap: 14px;
  padding: 14px 0;
  max-width: 900px;
  margin: 0 auto;
}
.avatar {
  width: 42px;
  height: 42px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  font-weight: 800;
  background: var(--bubble);
  border: 1px solid var(--border);
}
.avatar.user {
  background: var(--bubble-user);
  color: #2b6cb0;
  border-color: #b0c4de;
}
.avatar.bot {
  background: var(--bot);
  color: #ffffff;
}
.bubble {
  background: var(--bubble);
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 12px 14px;
  box-shadow: var(--shadow);
}
.msg.user .bubble {
  background: var(--bubble-user);
}
.bubble p {
  margin: 0 0 10px;
}
.bubble p:last-child {
  margin: 0;
}
.timestamp {
  font-size: .75rem;
  color: var(--muted);
  margin-top: 6px;
}
.tools {
  display: flex;
  gap: 6px;
  margin-top: 8px;
}
.tool {
  font-size: .8rem;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--sub);
  padding: 6px 8px;
  border-radius: 8px;
  cursor: pointer;
}
.tool:hover {
  border-color: #b0b0b0;
}
.composer {
  grid-area: input;
  position: sticky;
  bottom: 0;
  background: var(--panel);
  border-top: 1px solid var(--border);
  padding: 12px 16px;
}
.bar {
  max-width: 900px;
  margin: 0 auto;
  background: var(--elev);
  border: 1px solid var(--border);
  border-radius: 16px;
  display: flex;
  align-items: flex-end;
  gap: 8px;
  padding: 10px;
  box-shadow: var(--shadow);
}
textarea {
  flex: 1;
  resize: none;
  border: none;
  outline: none;
  background: transparent;
  color: var(--text);
  max-height: 40vh;
  min-height: 22px;
  padding: 6px 8px;
  font: 16px/1.45 inherit;
}
.kbd {
  border: 1px solid #d0d0d0;
  background: var(--kbd);
  border-radius: 6px;
  padding: 2px 6px;
  font-size: .8rem;
  color: #555555;
}
.hint {
  max-width: 900px;
  margin: 8px auto 0;
  color: var(--muted);
  font-size: .85rem;
  text-align: center;
}
.bubble code {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  background: var(--code);
  border: none;
  padding: .15rem .35rem;
  border-radius: 6px;
  font-size: .9em;
}
.bubble pre {
  background: var(--code);
  border: none;
  border-radius: 12px;
  padding: 12px;
  overflow: auto;
}
.copy {
  position: relative;
  margin-top: 6px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  opacity: .85;
  cursor: pointer;
  user-select: none;
}
.copy:hover {
  opacity: 1;
}
.typing {
  display: inline-flex;
  gap: 6px;
  align-items: center;
}
.dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #10a37f;
  opacity: .6;
  animation: b 1.2s infinite;
}
.dot:nth-child(2) {
  animation-delay: .15s;
}
.dot:nth-child(3) {
  animation-delay: .3s;
}
@keyframes b {
  0%, 80%, 100% {transform: translateY(0); opacity: .5;}
  40% {transform: translateY(-3px); opacity: 1;}
}
@media (max-width: 900px) {
  body {
    grid-template-columns: 1fr;
    grid-template-areas:
      "header"
      "main"
      "input";
  }
  aside {
    display: none;
  }
  header {
    position: sticky;
  }
  .mobile-only { display: inline-flex !important; }
  .mobile-only .dropdown-menu { right: auto; left: 0; }
  #mobileToolsDropdownComposer .dropdown-menu {
    top: auto !important;
    bottom: calc(100% + 8px) !important;
    transform: translateY(0) !important;
    box-shadow: 0 8px 30px rgba(0,0,0,0.5);
    z-index: 2000;
  }
  #mobileToolsMenuComposer li.selected {
    color: #0b5ed7;
    background: rgba(11,94,215,0.06);
  }
  #mobileToolsBtnComposer.primary {
    border-color: var(--accent);
    box-shadow: 0 6px 18px rgba(16,163,127,0.08);
    color: var(--text);
    background: var(--panel);
  }
  #jsFixToggle, #imageToggle, #thinkToggle, #webSearch { display: none !important; }
  #mobileToolsDropdownComposer { display: inline-flex !important; }
}
#mobileToolsDropdownComposer { display: none; }
.popup-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}
.popup-box {
  background: var(--bg-color, #fff);
  color: var(--text-color, #333);
  padding: 2rem;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  text-align: center;
  max-width: 300px;
  width: 100%;
}
.popup-btn {
  display: block;
  width: 100%;
  margin: 0.5rem 0;
  padding: 0.8rem;
  font-size: 1rem;
  font-weight: bold;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.2s;
}
#googleLogin {
  background: #4285F4;
  color: white;
}
#guestLogin {
  background: #666;
  color: white;
}
.popup-btn:hover {
  opacity: 0.9;
}
#accountPopup {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
#accountPopup .popup-content {
  background: var(--bg);
  padding: 20px;
  border-radius: 12px;
  width: 320px;
  max-width: 90%;
  text-align: center;
}
.dropdown {
  position: relative;
  display: inline-block;
}
.dropdown .btn {
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  user-select: none;
}
.dropdown-menu {
  position: absolute;
  right: 0;
  top: 110%;
  min-width: 200px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
  list-style: none;
  padding: 4px 0;
  margin: 0;
  display: none;
  z-index: 10;
  overflow: hidden;
  opacity: 0;
  transform: translateY(-5px);
  transition: opacity 0.15s ease, transform 0.15s ease;
}
.dropdown.open .dropdown-menu {
  display: block;
  opacity: 1;
  transform: translateY(0);
}
.dropdown-menu li {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  cursor: pointer;
  color: var(--text);
  font-size: 0.95rem;
  transition: background 0.2s, color 0.2s;
  white-space: nowrap;
}
.dropdown-menu li + li {
  border-top: 1px solid var(--border);
}
.dropdown-menu li:hover,
.dropdown-menu li:focus {
  background: var(--elev);
  color: var(--accent);
  outline: none;
}
.dropdown-menu li img {
#autocompleteContainer { padding-bottom:4px; }
#autocompleteContainer .autocomplete-btn { border-radius:10px; cursor:pointer; }
#autocompleteContainer .autocomplete-btn:hover { filter:brightness(0.95); transform:translateY(-1px); }
  width: 20px;
  height: 20px;
  object-fit: contain;
}
.account-profile {
  text-align: center;
  margin-bottom: 15px;
}
.btn.btn-switch {
  display: inline-block;
  margin: 10px 0;
  padding: 8px 12px;
  border-radius: 12px;
  cursor: pointer;
}
.account-avatar {
  width: 64px;
  height: 64px;
  border-radius: 10%;
  margin: 10px auto;
  display: block;
}
.account-name {
  font-weight: bold;
  margin: 5px 0;
}
.account-email {
  font-size: 0.9em;
  color: gray;
}
.account-guest,
.account-login-options {
  text-align: center;
}
.btn-google {
  background: #db4437;
  color: #fff;
}
.btn-guest {
  background: #444;
  color: #fff;
}
.btn-logout {
  background: #e74c3c;
  color: #fff;
}
.btn-switch {
  background: #3498db;
  color: #fff;
}
.bubble code { border: none !important; }
.bubble pre { border: none !important; }
</style>
</head>
<body>
  <div id="initialLoadingOverlay" style="position:fixed;inset:0;background:#000;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:2147483647;pointer-events:all;opacity:1;">
    <div style="display:flex;align-items:center;justify-content:center;max-width:96vw;max-height:96vh;padding:8px;">
      <img id="initialLoadingGif" src="loadingGifs/chroma.gif" alt="Loading..." style="max-width:90vw;max-height:90vh;border-radius:8px;display:block;">
    </div>
    <div id="initialLoadingMsg" style="margin-top:12px;color:#ddd;font-size:0.95rem;max-width:80vw;text-align:center;display:none;">It seems this is taking longer to load than usual... try checking your internet connection.</div>
  </div>
<aside>
  <div class="side-top">
    <button id="newChat" class="btn primary"><i class="fas fa-plus"></i> New Chat</button>
  </div>
  <div id="history" class="side-scroll"></div>
<div style="padding: 12px; text-align:center; position: relative;">
  <a href="https://postbase.app" target="_blank" rel="noopener" style="display:inline-block; position:relative;">
    <span style="
      position:absolute;
      top:8px; right:8px;
      background: var(--panel);
      color: var(--muted);
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid var(--border);
    ">Ad</span>
    <img src="postbaseAd.png" 
         alt="Check out our partner" 
         style="max-width:100%; border-radius:12px; box-shadow:var(--shadow);">
  </a>
</div>
  <div class="side-bottom small">
    <div style="display:flex; gap:8px; flex-wrap:wrap">
      <button id="clearAll" class="btn danger"><i class="fas fa-trash"></i></button>
      <button id="exportBtn" class="btn ghost"><i class="fas fa-file-export"></i> Export</button>
      <button id="importBtn" class="btn ghost"><i class="fas fa-file-import"></i> Import</button>
    </div>
  </div>
</aside>
  <header>
    <div class="brand">
  <div class="logo"><img src="logo.png" alt="Jumbo Bot" style="width:28px;height:28px;border-radius:8px;display:block;background:none;"></div>
      <div>
        <div>Jumbo</div>
        <div class="small" id="convTitle">New chat</div>
      </div>
    </div>
    <div class="actions">
      <button id="discordRedir" class="btn icon" title="Our Discord" aria-label="Our Discord"><i class="fa-brands fa-discord"></i></button>
      <button id="accountBtn" class="btn icon" title="Account" aria-label="Account"><i class="fa-solid fa-circle-user"></i></button>
      <button id="themeToggle" class="btn icon" title="Toggle Theme" aria-label="Toggle compact spacing"><i class="fas fa-circle-half-stroke"></i>
      </button>
      <button id="mobileChatsBtn" class="btn icon mobile-only" title="Chats" aria-label="Open chats menu"><i class="fas fa-list"></i></button>
<div class="dropdown">
  <button class="btn" id="modelSelectBtn">
    <span id="currentModel">Default</span>
    <i class="fas fa-chevron-down"></i>
  </button>
  <ul class="dropdown-menu" id="modelMenu">
    <li data-model="default">
      <img src="logoSmallNoBg.png" alt="Default Icon"> Default
    </li>
    <li data-model="bloxd">
      <img src="bloxd.jpg" alt="Bloxd Icon"> Bloxd
    </li>
      <li data-model="image-editing">
        <img src="logoSmallNoBg.png" alt="Image Edit Icon"> Image Editing
      </li>
      <li data-model="jumbo-pro">
        <img src="logoSmallNoBg.png" alt="Jumbo Pro Icon"> Jumbo Pro
      </li>
  </ul>
</div>
    </div>
  </header>
  <main id="chat" aria-live="polite" aria-label="Chat messages"></main>
  <div class="composer">
    <div class="bar">
  <button id="jsFixToggle" class="btn" title="Toggle JS Fix Mode"><i class="fas fa-code"></i></button>
  <button id="imageToggle" class="btn" title="Image Mode"><i class="fas fa-image"></i></button>
    <button id="speechToggle" class="btn" title="Speech-to-Text (Open)"><i class="fas fa-microphone"></i></button>
  <button id="thinkToggle" class="btn" title="Think Mode"><i class="fas fa-bolt"></i></button>
  <button id="webSearch" class="btn" title="Web Search (Wikipedia)" aria-label="Web Search"><i class="fas fa-globe"></i></button>
  <button id="aiBuilderToggle" class="btn" title="AI Builder" style="display:none;"><i class="fas fa-cube"></i> AI Builder</button>
  <div class="dropdown mobile-only" id="mobileToolsDropdownComposer">
    <button class="btn icon" id="mobileToolsBtnComposer" title="Tools"><i class="fas fa-tools"></i></button>
    <ul class="dropdown-menu" id="mobileToolsMenuComposer">
  <li data-tool="jsfix"><i class="fas fa-code"></i> JS Fix</li>
  <li data-tool="image"><i class="fas fa-image"></i> Image</li>
  <li data-tool="think"><i class="fas fa-bolt"></i> Think</li>
  <li data-tool="web"><i class="fas fa-globe"></i> Web Search</li>
  <li data-tool="aibuilder" style="display:none;"><i class="fas fa-cube"></i> AI Builder</li>
    </ul>
  </div>
      <textarea id="input" placeholder="Say anything..." rows="1" autofocus spellcheck="true"></textarea>
      <button id="send" class="btn primary" title="Send (Enter)">Send</button>
    </div>
    <div class="hint">Press <span class="kbd">Enter</span> to send • <span class="kbd">Shift</span>+<span class="kbd">Enter</span> for a new line</div>
  </div>
<div id="loginPopup" class="popup-overlay">
  <div class="popup-box">
    <h2>Welcome</h2>
    <p>Please choose how you’d like to continue:</p>
    <button id="googleLogin" class="popup-btn"><i class="fab fa-google"></i> Continue with Google</button>
    <button id="guestLogin" class="popup-btn"><i class="fas fa-user"></i> Continue as Guest</button>
  </div>
</div>
<div id="accountPopup" class="popup">
  <div class="popup-content">
    <h2 id="accountTitle">Account</h2>
    <div id="accountBody">
    </div>
    <button id="closeAccount" class="btn">Close</button>
  </div>
</div>
<script>
  (function(){
    try {
      const GIF_LIST = ['loadingGifs/chroma.gif','loadingGifs/tiles.gif','loadingGifs/draw.gif'];
      const img = document.getElementById('initialLoadingGif');
      const msg = document.getElementById('initialLoadingMsg');
      const overlay = document.getElementById('initialLoadingOverlay');
      if (!img || !overlay) return;
  let idx = 0;
  let cycleTimer = null;
  let fallbackTimer = null;
  let removed = false;
  let pageLoaded = false; 
      function clearCycleTimer(){ if (cycleTimer) { clearTimeout(cycleTimer); cycleTimer = null; } }
      function doRemoveOverlay(){
        if (removed) return;
        removed = true;
        clearCycleTimer();
        try { if (fallbackTimer) { clearTimeout(fallbackTimer); fallbackTimer = null; } } catch (e) {}
        try{
          overlay.style.transition = 'opacity 360ms ease';
          overlay.style.opacity = '0';
          const finish = () => { try { overlay.remove(); } catch (e) {} };
          overlay.addEventListener('transitionend', finish, { once: true });
          setTimeout(finish, 1200);
        } catch(e){}
        window.removeEventListener('load', onLoad);
      }
  function onLoad(){ pageLoaded = true; }
  window.addEventListener('load', onLoad, { once: true });
      function showExhaustedMessage(){
        try{
          if (msg) msg.style.display = 'block';
          try {
            let btn = document.getElementById('initialContinueBtn');
            if (!btn) {
              btn = document.createElement('button');
              btn.id = 'initialContinueBtn';
              btn.className = 'btn primary';
              btn.style = 'margin-top:12px;';
              btn.textContent = 'Continue to app';
              btn.addEventListener('click', () => { try { doRemoveOverlay(); } catch (e) {} });
              if (overlay) overlay.appendChild(btn);
            }
            if (overlay && !overlay._dismissListenerAdded) {
              overlay.addEventListener('click', (ev) => { if (ev.target === overlay) try { doRemoveOverlay(); } catch (e) {} });
              overlay._dismissListenerAdded = true;
            }
          } catch (ee) {}
        } catch(e){}
      }
      function showNextGif(){
        try{
          if (removed) return;
          if (idx >= GIF_LIST.length) { showExhaustedMessage(); return; }
          img.src = GIF_LIST[idx];
          cycleTimer = setTimeout(() => {
            cycleTimer = null;
            if (pageLoaded || document.readyState === 'complete') { doRemoveOverlay(); return; }
            idx += 1;
            if (idx < GIF_LIST.length) {
              showNextGif();
            } else {
              showExhaustedMessage();
            }
          }, 4000);
        } catch(e){
          showExhaustedMessage();
        }
      }
  if (document.readyState === 'complete') { pageLoaded = true; }
  showNextGif();
  try { fallbackTimer = setTimeout(()=>{ if (!pageLoaded) showExhaustedMessage(); }, 20000); } catch (e) {}
    } catch (e) {}
  })();
</script>
<script src="compromise.js"></script>
<script type="module" src="https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.min.js"></script>
<script type="module">
  import { pipeline } from "https://cdn.jsdelivr.net/npm/@xenova/transformers/dist/transformers.min.js";
  let translator = null;
  async function translateText(text, fromLang, toLang) {
    if (!translator) {
      translator = await pipeline(
        "translation",
        "Xenova/nllb-200-distilled-600M"
      );
    }
    const out = await translator(text, {
      src_lang: fromLang,
      tgt_lang: toLang
    });
    return out[0].translation_text;
  }
  window.translateText = translateText;
</script>
<script src="trainingData.js"></script>
<script src="bloxdCodeApiFunctions.js"></script>
<script src="languages.js"></script>
<script src="expanded_synonyms.js"></script>
<script src="script.js"></script>
<script type="module">
  import { pipeline } from "https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.7.3/dist/transformers.js";
  window.textTools = {
    summarizer: null,
    expander: null,
    async initSummarizer() {
      if (!this.summarizer) {
        this.summarizer = await pipeline("summarization", "Xenova/t5-small");
      }
      return this.summarizer;
    },
    async summarize(text, maxNewTokens = 120) {
      if (!text) return "";
      const model = await this.initSummarizer();
      const output = await model(text, { max_new_tokens: maxNewTokens });
      return (output[0].summary_text || output[0].generated_text || "").trim();
    },
    async initExpander() {
      if (!this.expander) {
        this.expander = await pipeline("text-generation", "Xenova/distilgpt2");
      }
      return this.expander;
    },
    async expand(text, maxNewTokens = 100) {
      if (!text) return "";
      const model = await this.initExpander();
      const output = await model(text, {
        max_new_tokens: maxNewTokens,
        do_sample: true,
        temperature: 0.9,
        top_p: 0.95
      });
      return (output[0].generated_text || "").trim();
    },
    async expandInStyle(text, maxNewTokens = 150) {
      if (!text) return "";
      const model = await this.initExpander();
      const prompt = `Expand on the following text with more detail, keeping the same style and tone:\n\n${text}\n\nExpanded version:`;
      const output = await model(prompt, {
        max_new_tokens: maxNewTokens,
        do_sample: true,
        temperature: 0.8, 
        top_p: 0.9
      });
      return output[0].generated_text.replace(prompt, "").trim();
    }
  };
  console.log("Text tools loaded");
</script>
<div id="mobileChatsOverlay" style="display:none;position:fixed;inset:0;z-index:9999;">
  <div style="position:absolute;left:0;top:0;bottom:0;width:320px;background:var(--panel);border-right:1px solid var(--border);box-shadow:0 8px 30px rgba(0,0,0,0.6);overflow:auto;padding:12px;display:flex;flex-direction:column;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
      <strong>Chats</strong>
      <button id="mobileCloseChats" class="btn icon">✕</button>
    </div>
    <div style="margin-bottom:8px;">
      <button id="mobileNewChat" class="btn primary" style="width:100%;"><i class="fas fa-plus"></i> New Chat</button>
    </div>
    <div id="mobileHistoryContainer" style="overflow:auto;flex:1;padding-bottom:8px;">
    </div>
    <div style="padding:8px 0; margin-top:8px;">
      <a href="https://postbase.app" target="_blank" rel="noopener" style="display:block;">
        <img src="postbaseAd.png" alt="Ad" style="width:100%; border-radius:12px; box-shadow:var(--shadow);">
      </a>
    </div>
    <div style="border-top:1px solid var(--border);padding-top:8px;margin-top:8px;display:flex;gap:8px;flex-wrap:wrap;">
      <button id="mobileClearAll" class="btn danger" style="flex:1;">Delete all</button>
      <button id="mobileExport" class="btn ghost" style="flex:1;">Export</button>
      <button id="mobileImport" class="btn ghost" style="flex:1;">Import</button>
    </div>
  </div>
  <div style="position:absolute;left:320px;right:0;top:0;bottom:0;background:rgba(0,0,0,0.4);" id="mobileChatsBackdrop"></div>
</div>
</body>
</html>